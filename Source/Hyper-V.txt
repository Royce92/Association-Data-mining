 hyper v  codenamed viridian  and formerly known as windows server virtualization  is a native hypervisor  it can create virtual machines on x      systems   starting with windows    hyper v supersedes windows virtual pc as the hardware virtualization component of the client editions of windows nt  a server computer running hyper v can be configured to expose individual virtual machines to one or more networks     hyper v was first released along windows server      and became a staple of the windows server family ever since             a beta version of hyper v was shipped with certain x      editions of windows server       the finalized version was released on june          and was delivered through windows update   hyper v has since been released with every version of windows server        microsoft provides hyper v through two channels     hyper v server      was released on october          it consists of windows server      server core and hyper v role  other windows server      roles are disabled  and there are limited windows services   hyper v server      is limited to a command line interface  cli  used to configure the host os  physical hardware and software  a menu driven cli interface and some freely downloadable script files simplify configuration  in addition  hyper v server supports remote access via remote desktop connection  however  administration and configuration of the host os and the guest virtual machines is generally done over the network  using either microsoft management consoles on another windows computer or system center virtual machine manager  this allows much easier  point and click  configuration  and monitoring of the hyper v server     hyper v server      r   an edition of windows server      r   was made available in september      and includes windows powershell v  for greater cli control  remote access to hyper v server requires cli configuration of network interfaces and windows firewall  also using a microsoft vista pc to administer hyper v server      r  is not fully supported     hyper v implements isolation of virtual machines in terms of a partition  a partition is a logical unit of isolation  supported by the hypervisor  in which each guest operating system executes  a hypervisor instance has to have at least one parent partition  running a supported version of windows server       and later   the virtualization stack runs in the parent partition and has direct access to the hardware devices  the parent partition then creates the child partitions which host the guest oss  a parent partition creates child partitions using the hypercall api  which is the application programming interface exposed by hyper v      a child partition does not have access to the physical processor  nor does it handle its real interrupts  instead  it has a virtual view of the processor and runs in guest virtual address  which  depending on the configuration of the hypervisor  might not necessarily be the entire virtual address space  depending on vm configuration  hyper v may expose only a subset of the processors to each partition  the hypervisor handles the interrupts to the processor  and redirects them to the respective partition using a logical synthetic interrupt controller  synic   hyper v can hardware accelerate the address translation of guest virtual address spaces by using second level address translation provided by the cpu  referred to as ept on intel and rvi  formerly npt  on amd     child partitions do not have direct access to hardware resources  but instead have a virtual view of the resources  in terms of virtual devices  any request to the virtual devices is redirected via the vmbus to the devices in the parent partition  which will manage the requests  the vmbus is a logical channel which enables inter partition communication  the response is also redirected via the vmbus  if the devices in the parent partition are also virtual devices  it will be redirected further until it reaches the parent partition  where it will gain access to the physical devices  parent partitions run a virtualization service provider  vsp   which connects to the vmbus and handles device access requests from child partitions  child partition virtual devices internally run a virtualization service client  vsc   which redirect the request to vsps in the parent partition via the vmbus  this entire process is transparent to the guest os     virtual devices can also take advantage of a windows server virtualization feature  named enlightened i o  for storage  networking and graphics subsystems  among others  enlightened i o is specialized virtualization aware implementation of high level communication protocols like scsi to take advantage of vmbus directly  that allows bypassing any device emulation layer  this makes the communication more efficient  but requires the guest os to support enlightened i o     currently only the following operating systems support enlightened i o  allowing them therefore to run faster as guest operating systems under hyper v than other operating systems that need to use slower emulated hardware     the stand alone hyper v server variant does not require an existing installation of windows server      nor windows server      r   the standalone installation is called microsoft hyper v server for the non r  version and microsoft hyper v server      r   microsoft hyper v server is built with components of windows and has a windows server core user experience  none of the other roles of windows server are available in microsoft hyper v server  this version supports up to    vms per system    system requirements of microsoft hyper v server are the same for supported guest operating systems and processor  but differ in the following       hyper v server      r  has the same capabilities as the standard hyper v role in windows server      r  and supports      active vms        the following table lists supported guest operating systems on windows server      and windows server      r        fedora   or   are unsupported  however  they have been reported to run             third party support for freebsd     and later guests is provided by a partnership between netapp and citrix    this includes both emulated and paravirtualized modes of operation  as well as several hyperv integration services       desktop virtualization  vdi  products from third party companies  such as quest software vworkspace  citrix xendesktop  systancia applidis fusion   and ericom powerterm webconnect  provide the ability to host and centrally manage desktop virtual machines in the data center while giving end users a full pc desktop experience     guest operating systems with enlightened i o and a hypervisor aware kernel such as windows server      and later server versions  windows vista sp  and later clients and offerings from citrix xenserver and novell will be able to use the host resources better since vsc drivers in these guests communicate with the vsps directly over vmbus    non  enlightened  operating systems will run with emulated i o    however  integration components  which include the vsc drivers  are available for windows server      sp   windows vista sp  and linux to achieve better performance  xen enabled linux guest distributions can also be paravirtualized in hyper v  as of     update microsoft officially supports only suse linux enterprise server    sp  sp  x   and x   editions in this way    though any xen enabled linux should be able to run  in february       red hat and microsoft signed a virtualization pact for hypervisor interoperability with their respective server operating systems  to enable red hat enterprise linux   to be officially supported on hyper v       in july       microsoft submitted hyper v drivers to the kernel  which improve the performance of virtual linux guest systems in a windows hosted environment  microsoft was forced to submit the code when it was discovered that microsoft had incorporated a hyper v network driver with gpl licensed components statically linked to closed source binaries    hyper v provides basic virtualization support for linux guests out of the box  paravirtualization support is  however  available by installing the linux integration components or satori inputvsc drivers  on july           microsoft submitted these drivers for inclusion in the linux kernel under the terms of the gpl    so that kernels from        may include inbuilt hyper v paravirtualization support     hyper v in windows server      and windows server      r  changes the support list above as follows       hyper v  like microsoft virtual server and windows virtual pc  saves each guest os to a single virtual hard disk file with the extension  vhd  except in windows   and windows server      where it can be the newer  vhdx  this file contains the entire guest os  though other files can also be configured to allow  undo information  etc     older  vhd files from virtual server      and virtual pc           can be copied and used by hyper v  but any old virtual machine integration software  equivalents of hyper v integration services for other virtualization software  must be removed from the virtual machine  after the migrated guest os is configured and started using hyper v  the guest os will detect changes to the  virtual  hardware  installing  hyper v integration services  installs five services to improve performance  at the same time adding the new guest video and network card drivers  consequently  windows guests may require re activation     hyper v supports usb devices in hyper v guest vms with a new feature called virtual machine connection  enhanced session mode    this fact makes it very inconvenient to run software protected by dongles in the guest  a workaround to access usb drives in windows guest vms involves using the microsoft remote desktop client to  share  host drives with guests over a remote desktop connection         hyper v does not virtualize audio hardware  before windows     and windows server      r   it was possible to work around this issue by connecting to the virtual machine with remote desktop connection over a network connection and use its audio redirection feature      windows     and windows server      r  add the enhanced session mode which provides redirection without a network connection       optical drives virtualized in the guest vm are read only    hyper v does not support the host root operating system s optical drives to pass through in guest vms  as a result  burning to discs  audio cds  video cd dvd video playback are not supported  however a workaround exists using the iscsi protocol  setting up an iscsi target on the host machine with the optical drive can then be talked to by the standard microsoft iscsi initiator  microsoft produces their own iscsi target software or alternative third party products can be used       on cpus without second level address translation  installation of most wddm accelerated graphics drivers on the primary os will cause a dramatic drop in graphic performance  this occurs because the graphics drivers access memory in a pattern that causes the translation lookaside buffer to be flushed frequently       in windows server       microsoft officially supported hyper v only with the default vga drivers    which do not support windows aero  higher resolutions  rotation  or multi monitor display  however  unofficial workarounds were available in certain cases  older non wddm graphics drivers sometimes did not cause performance issues  though these drivers did not always install smoothly on windows server  intel integrated graphics cards did not cause tlb flushing even with wddm drivers    some nvidia graphics drivers did not experience problems so long as windows aero was turned off and no  d applications were running       in windows server      r   microsoft added support for second level address translation to hyper v  since slat is not required to run hyper v with windows server    the problem will continue to occur if a non slat cpu is used with accelerated graphics drivers  however  slat is required to run hyper v on client versions of windows         hyper v in windows server      does not support  live migration  of guest vms  where  live migration  is defined as maintaining network connections and uninterrupted services during vm migration between physical hosts   instead  hyper v on server      enterprise and datacenter editions supports  quick migration   where a guest vm is suspended on one host and resumed on another host  this operation happens in the time it takes to transfer the active memory of the guest vm over the network from the first host to the second host       however  with the release of windows server      r   live migration is supported with the use of cluster shared volumes  csvs   this allows for failover of an individual vm as opposed to the entire host having to failover  it seems that when a node  hyper v server  not a vm  fails then each  vm running on the failed node  may migrate to other live nodes independently of  other vms on the same lun running on other nodes that share the lun with the failed node   in hyper v we are clustering the hyper v nodes not the vms    see also cluster shared volumes     windows server      s implementation of hyper v  version      introduced many new features to increase vm mobility  including the ability to execute simultaneous live migrations  windows server      r  only supported live migrating a single vm at a time  significantly increasing the time required to carry administrative tasks  such as draining a node for scheduled maintenance   the only real limiting factor here is hardware and network bandwidth available  windows server      also supports a new  shared nothing live migration  option  where no traditional shared storage is required in order to complete a migration  also referred to as  live system migration   a shared nothing live migration will move a running vm and its storage from one hyper v host to another without any perceived downtime  live migration between different host os versions is not possible  although this is soon to be addressed in windows server      r      windows server      also introduced the ability to use simple smb shares as a shared storage option  in conjunction with the new scale out file services role in server      for highly available environments   alleviating the need for expensive sans  this is particularly useful for low budget environments  without the need to sacrifice performance due to the many new improvements to the smb  stack  windows server      will fully support the live migration of vms running on smb shares  whether it be a live or live system migration     hyper v under windows server      also supports the ability to migrate a running vm s storage  whereby an active virtual machines storage can be moved from one infrastructure to another without the vm s workload being affected  further reducing the limitations associated with vm mobility     with the introduction of windows server      r   smb     was introduced as a transport option for live migration  either between clustered or non clustered virtualization hosts  this enables hyper v live migration to leverage the additional benefits that smb     brings  such as smb multichannel and smb direct  in conjunction with rdma nics  for increased live migration performance     windows xp frequently accesses cpu s apic task priority register  tpr  when interrupt request level changes  causing a performance degradation when running as guests on hyper v    microsoft has fixed this problem in windows server      and later       intel adds tpr virtualization  flexpriority  to vt x on intel core   step e onwards to alleviate this problem    amd has a similar feature on amd v but uses a new register for the purpose  this however means that the guest has to use different instructions to access this new register  amd provides a driver called  amd v optimization driver  that has to be installed on the guest to do that       network card teaming or link aggregation is only supported if the nic manufacturer supplied drivers support nic teaming    however  windows server      and thus the version of hyper v included with it supports software nic teaming       hyper v management tools are not compatible with windows vista home basic or home premium     or windows   home premium  home basic or starter     hyper v      can only be managed by windows    windows server      or their successors         bit skus of windows   pro or enterprise edition come with hyper v       windows server      introduced many new features in hyper v   