 within internet message handling services  mhs   a message transfer agent  or mail transfer agent   mta  or mail relay is software that transfers electronic mail messages from one computer to another using a client server application architecture  an mta implements both the client  sending  and server  receiving  portions of the simple mail transfer protocol      the terms mail server  mail exchanger  and mx host may also refer to a computer performing the mta function  the domain name system  dns  associates a mail server to a domain with mail exchanger  mx  resource records containing the domain name of a host providing mta services     a mail server is a computer that serves as an electronic post office for email  mail exchanged across networks is passed between mail servers that run specially designed software  this software is built around agreed upon  standardized protocols for handling mail messages and any data files  such as images  multimedia or documents  that might be attached to them             a message transfer agent receives mail from either another mta  a mail submission agent  msa   or a mail user agent  mua   the transmission details are specified by the simple mail transfer protocol  smtp   when a recipient mailbox of a message is not hosted locally  the message is relayed  that is  forwarded to another mta  every time an mta receives an email message  it adds a received trace header field to the top of the header of the message   thereby building a sequential record of mtas handling the message  the process of choosing a target mta for the next hop is also described in smtp  but can usually be overridden by configuring the mta software with specific routes         an mta works in the background  while the user usually interacts directly with a mail user agent  one may distinguish initial submission as first passing through an msa   port     is used for communication between an mua and an msa while port    is used for communication between mtas  or from an msa to an mta   this distinction is first made in rfc          for recipients hosted locally  the final delivery of email to a recipient mailbox is the task of a message delivery agent  mda   for this purpose the mta transfers the message to the message handling service component of the message delivery agent  upon final delivery  the return path field is added to the envelope to record the return path     the function of an mta is usually complemented with some means for email clients to access stored messages  this function typically employs a different protocol  the most widely implemented open protocols for the mua are the post office protocol  pop   and the internet message access protocol  imap   but many proprietary systems exist  exchange  lotus domino notes  for retrieving messages  many systems also offer a web interface for reading and sending email that is independent of any particular mua     at its most basic  an mua using pop  downloads messages from the server mailbox onto the local computer for display in the mua  messages are generally removed from the server at the same time but most systems also allow a copy to be left behind as a backup  in contrast  an mua using imap displays messages directly from the server  although a download option for archive purposes is usually also available  one advantage this gives imap is that the same messages are visible from any computer accessing the email account  since messages aren t routinely downloaded and deleted from the server  if set up properly  sent mail can be saved to the server also  in contrast with pop mail  where sent messages exist only in the local mua and are not visible by other muas accessing the same account     the imap protocol has features that allow uploading of mail messages and there are implementations that can be configured to also send messages like an mta   which combine sending a copy and storing a copy in the sent folder in one upload operation     the reason for using smtp as a standalone transfer protocol is twofold     in recent yearswhen   mainly due to concerns over spam and a general trend towards centralisation  problems have arisen for small organisations and home users wishing to run their own email server  as of     update many isps pre emptively block outgoing connections to tcp port    on domestic connections   and larger email providers have increasingly stringent requirements for other servers that wish to transfer emails to them  for example  reverse ptr records of the sending mail server are often checked before accepting mail   the ptr record must be set up by the isp  which may refuse this request to a small business or domestic user     other problems encountered by small mail servers include zealous use of blacklisting and a presumption of guilt by blacklisting services and large email providers  which classify  new  servers as spammers by default  